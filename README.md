以下是为您设计的游戏框架及各方面说明，游戏暂定名《心灵港湾》（Mind Haven/Mind Beacon）：

### 整体框架说明
类型：放置型都市奇幻RPG
核心循环：
收集心理能量→治愈角色→解锁新区域→获得特殊能力→参与城市事件
特色系统：
- 心理状态模拟系统（每位NPC有动态心理参数）
- 城市氛围指数（全局环境变量）
- 潜意识建筑系统（可自由组合的模块化场景）

---
### 1. 游戏技术框架
**架构方案：**
- 采用 Godot 引擎（版本：4.6，支持跨平台部署）
- 游戏为单机游戏

**关键技术实现：**
- 离线收益算法：采用分形时间压缩算法，确保长时间离线的合理收益
- 动态心理模型：基于简化版MBTI+大五人格的复合算法
- 环境交互系统：基于概率云的事件触发机制
- 数据安全：双通道校验+本地数据加密

**网络方案：**
- 异步数据同步（每15分钟自动保存）
- 轻量级社交系统（互助能量站+心情漂流瓶）
- 防沉迷系统：智能提醒+温柔强制下线机制

---
### 2. 美术风格
**核心风格：**
治愈系赛璐璐风格 + 微缩景观元素

**具体表现：**
- 角色设计：
  - 三头身Q版比例
  - 情绪可视化设计（发色随心情渐变）
  - 职业特征符号化（教师=书本形发饰，程序员=数据流围巾）

- 场景设计：
  - 立体书式城市布局
  - 光污染特效（代表不同心理能量）
  - 动态天气系统（对应心理状态）

- UI设计：
  - 拟物化心理咨询档案界面
  - 流体动态按钮
  - 情绪光谱环形菜单

**参考风格：**
《纪念碑谷》的空间设计 + 《动物森友会》的色彩运用 + 《Psychonauts》的超现实元素

---
### 3. 游戏背景设定
**世界观：**
在名为"新巴比伦"的架空现代都市中，人类突然集体出现"心灵失温症"，玩家作为刚入职的"心灵疗愈师"，通过经营城市各个角落的心理咨询室，逐步揭开隐藏在都市地下的远古心理学文明遗迹。

**关键设定：**
- 三界设定：
  1. 表世界：正常运转的现代都市
  2. 里世界：具象化的心理空间（焦虑=荆棘迷宫，抑郁=深海世界）
  3. 遗迹层：古代心理学文明的超现实造物

- 势力分布：
  - 荣格学院（玩家所属）
  - 行为主义商会
  - 人本主义互助会
  - 神秘反派"认知扭曲体"

**核心角色示例：**
- 引路NPC：会说话的心理学古籍《弗洛伊德的猫》
- 首个治愈对象：患社交恐惧症的AI工程师（可解锁编程小游戏）
- 中期Boss：物化焦虑形成的"消费主义巨像"

---
### 4. 游戏背景配乐
**音效设计原则：**
ASMR级环境音 + 心理学相关音律彩蛋

**音乐分层系统：**
1. 基础层：白噪音组合（雨声/咖啡厅环境音/城市夜鸣）
2. 动态层：根据当前区域心理状态变化的和声铺垫
3. 事件层：重要剧情时的主题旋律

**特色配乐设计：**
- 心理咨询室：钢琴+八音盒版经典心理学实验音乐
- 焦虑迷宫：加速版卡农变奏（随进度恢复正常速度）
- 遗迹探索：融合古代唱诵的电子音乐
- 治愈时刻：基于玩家操作生成的个性化旋律

**交互音效：**
- 心理能量收集：类似风铃的"认知碎片"音
- 负面情绪净化：玻璃碎裂的延迟回声效果
- 角色升级：心跳声渐强最终突破次元壁的音效

---
### 扩展系统建议
1. **「记忆拼图」系统**：通过完成心理学小游戏解锁角色背景故事
2. **「潜意识装修」玩法**：自定义心理咨询室的装潢影响NPC来访概率
3. **「都市传说」事件**：随机触发的心理学经典实验彩蛋（如斯坦福监狱事件重现）
4. **「心灵图鉴」收集**：包含真实心理学知识的可交互百科全书

该设计在保证护肝放置的基础上，通过：
- 环境叙事代替强制剧情
- 被动收益+主动探索的平衡
- 真实心理学知识的游戏化转化
实现教育性与娱乐性的结合，同时为后续DLC（如发展心理学扩展包、跨文化心理学版本）预留充足空间。


### 更新内容
#### 项目结构规划
```javascript
MindBeacon/
├── project.godot              # Godot项目配置
├── assets/                    # 资源文件夹
│   ├── sprites/              # 精灵图片
│   ├── audio/                # 音频文件
│   ├── fonts/                # 字体文件
│   └── ui/                   # UI资源
├── scenes/                    # 场景文件
│   ├── main/                 # 主场景
│   ├── characters/           # 角色场景
│   ├── environments/         # 环境场景
│   └── ui/                   # UI场景
├── scripts/                   # 脚本文件
│   ├── core/                 # 核心系统
│   ├── characters/           # 角色系统
│   ├── gameplay/             # 玩法系统
│   └── ui/                   # UI系统
├── data/                      # 数据文件
│   ├── configs/              # 配置文件
│   └── saves/                # 存档文件
└── docs/                      # 文档
```

#### __模块1: 核心游戏系统 (Core Systems)__

1. __游戏管理器 (GameManager)__
   - 游戏状态机（主菜单、游戏中、暂停、设置）
   - 场景切换管理
   - 全局事件总线

2. __存档系统 (SaveSystem)__
   - 本地数据加密存储
   - 自动保存（每15分钟）
   - 存档槽管理

3. __离线收益系统 (OfflineProgressSystem)__
   - 分形时间压缩算法实现
   - 离线时间计算
   - 收益上限平衡

---

#### __模块2: 心理系统 (Psychology Systems)__

1. __心理状态模型 (PsychologyModel)__
   - MBTI简化模型（4维度）
   - 大五人格参数（5维度）
   - 复合心理状态计算

2. __城市氛围指数 (CityMoodIndex)__
   - 全局心理健康值
   - 区域心理状态
   - 动态环境影响

3. __心理能量系统 (MentalEnergySystem)__
   - 能量收集机制
   - 能量类型（正面/负面）
   - 能量转化与使用

---

#### __模块3: 角色系统 (Character Systems)__

1. __NPC管理器 (NPCManager)__
   - NPC生成与管理
   - 动态心理参数
   - 日程与行为AI

2. __治愈系统 (HealingSystem)__
   - 治愈进度追踪
   - 治愈方法选择
   - 治愈效果反馈

3. __角色数据模型 (CharacterData)__
   - 基础属性
   - 职业特征
   - 背景故事

---

#### __模块4: 世界系统 (World Systems)__

1. __三界管理器 (WorldLayerManager)__
   - 表世界（现代都市）
   - 里世界（心理空间）
   - 遗迹层（远古文明）

2. __区域解锁系统 (AreaUnlockSystem)__
   - 解锁条件判断
   - 进度追踪
   - 奖励发放

3. __事件触发系统 (EventTriggerSystem)__
   - 概率云事件机制
   - 城市事件
   - 都市传说事件

---

#### __模块5: UI系统 (UI Systems)__

1. __主界面 (MainUI)__
   - 资源显示
   - 快捷操作
   - 通知系统

2. __心理档案界面 (PsychologyFileUI)__
   - 拟物化档案设计
   - 角色心理数据展示
   - 治愈进度显示

3. __情绪光谱菜单 (EmotionSpectrumMenu)__
   - 环形菜单实现
   - 情绪类型选择
   - 动态视觉反馈

---

#### __模块6: 音频系统 (Audio Systems)__

1. __音乐分层系统 (LayeredMusicSystem)__
   - 基础层（白噪音）
   - 动态层（和声）
   - 事件层（主题旋律）

2. __交互音效管理 (SFXManager)__
   - 收集音效
   - 净化音效
   - 升级音效

---

#### __模块7: 扩展玩法系统 (Extended Gameplay)__（暂不实现）

1. __记忆拼图系统 (MemoryPuzzleSystem)__
   - 小游戏框架
   - 故事解锁机制

2. __潜意识装修系统 (SubconsciousDecorationSystem)__
   - 装修物品管理
   - 效果计算
   - NPC影响

3. __心灵图鉴系统 (MindEncyclopedia)__
   - 收集进度
   - 心理学知识展示
